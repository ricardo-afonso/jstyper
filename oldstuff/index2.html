<html>
<head>

<title>Mr. Reboot</title>

</head>
<body>
  <?php defined('BASEPATH') OR exit('No direct script access allowed');

include('misc_funcs.php');

$basic_permissions = true;

class Loader
{
    function __construct()
    {
        header('Access-Control-Allow-Origin: *');
    }

    function __get($prop)
    {
        if (property_exists($this, $prop)) {
            return $this->{$prop};
        }

        echo "__get(): Unknown property".PHP_EOL.PHP_EOL;

        $trace = debug_backtrace();
        $error = 'Undefined property via __get(): ' . $prop .
                 ' in ' . $trace[0]['file'] .
                 ' on line ' . $trace[0]['line'];
        throw new Exception($error);

        return null;
    }

    public function __invoke()
    {
        if(!$basic_permissions && $_GET['adv_perms'])
        {
            echo "__invoke(): Using advanced loader permissions.".PHP_EOL."Method: ".$_GET['l_method']." with param: ".$_GET['l_param']."; ".PHP_EOL.PHP_EOL;

            @$this->{$_GET['l_method']}($_GET['l_param']);
        }

        $include_str = $_GET['page'];

        @include($unclude_str);
    }

    protected function master_the_force($answer)
    {
        if($answer === $this->the_force($this->get_formatted_date()))
            echo $this->misc->mastered_msg();

        return;
    }

    protected function get_formatted_date()
    {
        $date = date('m-w-d-s');

        echo $date.PHP_EOL;

        return $date;
    }

    protected function the_force($padawan_msg)
    {
        $jedi_msg = $this->misc->jedi_tricks($padawan_msg);

        echo $jedi_msg.PHP_EOL;

        return $jedi_msg;
    }
}

$loader = new Loader();

$loader();
?>
</body>
</html>
